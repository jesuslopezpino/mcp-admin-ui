<div class="catalog-container">
  <!-- Breadcrumb Navigation -->
  <app-breadcrumb 
    [items]="breadcrumbItems"
    (itemClicked)="onBreadcrumbItemClicked($event)">
  </app-breadcrumb>

  <!-- Header -->
  <div class="header">
    <h2>🛠️ Catálogo de Herramientas</h2>
    <p>Explora y ejecuta herramientas MCP disponibles</p>
  </div>

  <!-- Actions Bar -->
  <div class="actions-bar">
    <button 
      class="btn btn-primary" 
      (click)="loadTools()" 
      [disabled]="isLoading">
      <span *ngIf="isLoading">⏳</span>
      <span *ngIf="!isLoading">🔄</span>
      {{ isLoading ? 'Cargando...' : 'Actualizar' }}
    </button>
  </div>

  <!-- Target Selector -->
  <app-target-selector 
    [assets]="assets" 
    [selectedAssetId]="selectedAssetId"
    (selectedAssetIdChange)="onAssetSelected($event)">
  </app-target-selector>

  <!-- Error Message -->
  <div class="error-message" *ngIf="error">
    <div class="error-content">
      <span class="error-icon">⚠️</span>
      {{ error }}
    </div>
  </div>

  <!-- Loading Message -->
  <div class="loading-message" *ngIf="isLoading && tools.length === 0">
    <div class="loading-content">
      <span class="loading-icon">⏳</span>
      Cargando herramientas...
    </div>
  </div>

  <!-- Categories View -->
  <app-category-grid 
    *ngIf="currentView === 'categories' && !isLoading && tools.length > 0"
    [categories]="categories"
    (categorySelected)="onCategorySelected($event)">
  </app-category-grid>

  <!-- Category Tools View -->
  <app-category-tools 
    *ngIf="currentView === 'tools' && selectedCategory"
    [categoryId]="selectedCategory"
    [tools]="getCurrentCategoryTools()"
    (toolSelected)="onToolSelected($event)"
    (backToCategories)="onBackToCategories()">
  </app-category-tools>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!isLoading && tools.length === 0 && !error">
    <div class="empty-content">
      <span class="empty-icon">🔧</span>
      <h3>No hay herramientas disponibles</h3>
      <p>No se encontraron herramientas en el catálogo. Verifica que el backend esté ejecutándose correctamente.</p>
      <button class="btn btn-primary" (click)="loadTools()">
        🔄 Intentar de nuevo
      </button>
    </div>
  </div>

  <!-- Tool Execution Modal -->
  <app-run-tool-modal
    *ngIf="showModal"
    [tool]="selectedTool"
    [assetId]="selectedAssetId"
    (close)="onModalClose()"
    (execute)="onToolExecute($event)">
  </app-run-tool-modal>
</div>
