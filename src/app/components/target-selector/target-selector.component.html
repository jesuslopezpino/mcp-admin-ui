<div class="target-selector-compact" data-testid="target-selector-container">
  <div class="selector-row" data-testid="selector-row">
    <div class="selector-info" data-testid="selector-info">
      <div class="selector-icon">ğŸ¯</div>
      <div class="selector-label">
        <span class="label-text">Destino de EjecuciÃ³n</span>
        <span class="label-subtitle" *ngIf="getSelectedAsset()">{{ getSelectedAsset()?.hostname || getSelectedAsset()?.ip }}</span>
      </div>
    </div>

    <div class="selector-controls">
      <!-- Simple select with Reactive Forms -->
      <div class="select-wrapper">
        <select 
          data-testid="target-selector"
          [formControl]="targetCtrl"
          class="target-select">
          <option data-testid="target-option-local" [ngValue]="null">ğŸ–¥ï¸ â€” Servidor (local) â€”</option>
          <option 
            *ngFor="let asset of sortedAssets; trackBy: trackByAssetId"
            [ngValue]="asset.id"
            [disabled]="!asset.winrmEnabled"
            [attr.data-testid]="'target-option-' + asset.id">
            {{ asset.winrmEnabled ? 'ğŸŸ¢' : 'ğŸ”´' }} {{ asset.hostname || asset.ip }}{{ asset.ip && asset.hostname ? ' (' + asset.ip + ')' : '' }}
            {{ !asset.winrmEnabled ? ' (Sin WinRM)' : '' }}
          </option>
        </select>
        <span *ngIf="assetsLoading" class="loading-spinner">â³</span>
      </div>
    </div>
  </div>
</div>
