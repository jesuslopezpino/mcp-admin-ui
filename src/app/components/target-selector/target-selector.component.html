<p-card class="target-selector-card" data-testid="target-selector-container">
  <div class="flex align-items-center justify-content-between gap-3">
    <!-- Info Section -->
    <div class="flex align-items-center gap-2" data-testid="selector-info">
      <i class="pi pi-target text-primary text-xl"></i>
      <div class="flex flex-column">
        <span class="font-semibold text-sm">Destino de Ejecuci√≥n</span>
        @if (getSelectedAsset()) {
          <span class="text-xs text-600">{{ getSelectedAsset()?.hostname || getSelectedAsset()?.ip }}</span>
        }
      </div>
    </div>

    <!-- Selector Controls -->
    <div class="flex align-items-center gap-2">
      @if (assetsLoading) {
        <p-progressSpinner 
          [style]="{'width': '20px', 'height': '20px'}"
          strokeWidth="3">
        </p-progressSpinner>
      }
      
      <p-select
        data-testid="target-selector"
        [formControl]="targetCtrl"
        [options]="selectOptions"
        optionLabel="label"
        optionValue="value"
        [placeholder]="'Seleccionar destino'"
        [disabled]="assetsLoading"
        class="w-full"
        styleClass="w-20rem">
        <ng-template pTemplate="selectedItem" let-selectedOption>
          @if (selectedOption) {
            <div class="flex align-items-center gap-2">
              <i [class]="selectedOption.icon" [class]="selectedOption.statusClass"></i>
              <span>{{ selectedOption.label }}</span>
            </div>
          }
        </ng-template>
        <ng-template pTemplate="item" let-option>
          <div class="flex align-items-center gap-2">
            <i [class]="option.icon" [class]="option.statusClass"></i>
            <span>{{ option.label }}</span>
            @if (option.subtitle) {
              <span class="text-xs text-600">{{ option.subtitle }}</span>
            }
          </div>
        </ng-template>
      </p-select>
    </div>
  </div>
</p-card>
