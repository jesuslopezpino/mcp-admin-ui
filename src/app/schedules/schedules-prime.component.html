<app-crud-table
  title="ðŸ“… Schedules"
  description="Manage and monitor scheduled tasks"
  [data]="schedules"
  [columns]="columns"
  [actions]="actions"
  [loading]="loading"
  [showCreateButton]="true"
  createButtonLabel="New Schedule"
  createButtonIcon="pi pi-plus"
  [showFilters]="true"
  [filterFields]="['name', 'toolName', 'cronExpr']"
  [statusOptions]="statusOptions"
  [selectedStatus]="selectedStatus"
  [globalFilter]="globalFilter"
  [selectedItems]="selectedSchedules"
  [showSelection]="true"
  [showPagination]="true"
  [rows]="10"
  [rowsPerPageOptions]="[10, 25, 50]"
  (onCreate)="onCreateSchedule()"
  (onEdit)="onEditSchedule($event)"
  (onView)="onViewSchedule($event)"
  (onDelete)="deleteTask($event)"
  (onSelectionChange)="selectedSchedules = $event"
  (onGlobalFilterChange)="globalFilter = $event"
  (onStatusFilterChange)="selectedStatus = $event"
  (onClearFilters)="clearFilters()">
</app-crud-table>

<!-- Form Modal -->
<app-crud-form
  [visible]="showForm()"
  [mode]="formMode()"
  [config]="getFormConfig()"
  [data]="formData()"
  [loading]="formLoading()"
  (onSave)="onFormSave($event)"
  (onCancel)="onFormCancel()"
  (onClose)="onFormClose()">
</app-crud-form>

<!-- Legacy Modal (keep for compatibility) -->
@if (showModal) {
  <app-schedule-modal
    [task]="editingTask"
    [tools]="tools"
    [assets]="assets"
    (saved)="onTaskSaved($event)"
    (closed)="closeModal()">
  </app-schedule-modal>
}

